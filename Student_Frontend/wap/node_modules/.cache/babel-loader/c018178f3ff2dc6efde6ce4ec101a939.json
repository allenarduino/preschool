{"ast":null,"code":"import _defineProperty from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link}from'react-router-dom';import\"./Mycourses.css\";import\"./Displays.css\";//This class component is for students to view their enrolled courses\nvar Mycourses=/*#__PURE__*/function(_React$Component){_inherits(Mycourses,_React$Component);var _super=_createSuper(Mycourses);function Mycourses(props){var _this;_classCallCheck(this,Mycourses);_this=_super.call(this,props);_this.check=function(){_this.setState({shscourses:[]});/*If we return empty courses, send the message \nby changing the state\n*/if(_this.state.searched_courses.length===0){_this.setState({message:true});}};_this.search=function(){//Please look at this function at the top it's  very important\n_this.check();_this.setState({mycourses:[]});var data=new FormData();data.append(\"name\",_this.state.name);fetch(\"https://merl.herokuapp.com/search_my_enrolled_courses\",{method:\"POST\",headers:{Authorization:\"\".concat(localStorage.getItem(\"student_token\"))},\"Content-Type\":\"application/json\",body:data}).then(function(res){return res.json();}).then(function(data){_this.setState({searched_courses:data});//I did this because of testing in the console\nconsole.log(data);}).catch(function(err){return console.log(err);});};_this.handleinput=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.unenroll=function(id){if(window.confirm(\"Are you sure you want to unenroll in this course\")){fetch(\"https://merl.herokuapp.com/un_enroll/\".concat(id),{method:\"DELETE\",headers:{Authorization:\"\".concat(localStorage.getItem('student_token'))}}).then(function(res){return res.json();}).then(function(data){//alert(data)\nvar courselist=_this.state.mycourses;for(var i=0;i<courselist.length;i++){var p=courselist[i];if(p.id===id){courselist.splice(i,1);break;}}_this.setState({mycourses:courselist});}).catch(function(err){return console.log(err);});}};_this.state={mycourses:[],searched_courses:[],message:false,name:\"\",loading:true};return _this;}/*Function to throw message if search result is empty and\nto set mycourses state to an empty array if the search \nresult is empty.This will throw an empty page with message\n*/_createClass(Mycourses,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch(\"https://merl.herokuapp.com/my_enrolled_courses\",{methods:\"GET\",\"Content-Type\":\"application/json\",headers:{Authorization:\"\".concat(localStorage.getItem(\"student_token\"))}}).then(function(res){return res.json();}).then(function(data){_this2.setState({mycourses:data,loading:false});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{style:{paddingTop:150},className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"search-nav\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.name,name:\"name\",onChange:this.handleinput,onKeyUp:this.search,placeholder:\"Search courses......\",className:\"search-input\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"search-button\",onClick:this.search},\"Search\")),this.state.searched_courses.length>0?this.state.searched_courses.map(function(t){return/*#__PURE__*/React.createElement(\"div\",{className:\"course-container  col-md-6 col-xl-4 col-sm-12 col-xs-12 col-lg-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"course-header\"},/*#__PURE__*/React.createElement(\"img\",{className:\"course-img\",src:\"https://merl.herokuapp.com\".concat(t.course_img)})),/*#__PURE__*/React.createElement(\"div\",{className:\"course-footer  col text-center\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"course-name\"},t.name),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(Link,{to:\"singlecourse/\".concat(t.course_id)},/*#__PURE__*/React.createElement(\"button\",{className:\"acess-butn\"},\"Acess\")),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){_this3.unenroll(t.course_id);},className:\"enroll-butn\"},\"Unenroll\"))));}):null,this.state.loading==false?this.state.mycourses.map(function(t){return/*#__PURE__*/React.createElement(\"div\",{className:\"course-container  col-md-6 col-xl-4 col-sm-12 col-xs-12 col-lg-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"course-header\"},/*#__PURE__*/React.createElement(\"img\",{className:\"course-img\",src:\"http://127.0.0.1:5000\".concat(t.course_img)})),/*#__PURE__*/React.createElement(\"div\",{className:\"course-footer  col text-center\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"course-name\"},t.name),/*#__PURE__*/React.createElement(Link,{to:\"singlecourse/\".concat(t.course_id)},/*#__PURE__*/React.createElement(\"button\",{className:\"acess-butn\"},\"Acess\")),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){_this3.unenroll(t.course_id);},className:\"enroll-butn\"},\"Unenroll\")));}):/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:200},className:\"col text-center\"},/*#__PURE__*/React.createElement(\"h1\",null,this.state.message)));}}]);return Mycourses;}(React.Component);export default Mycourses;","map":{"version":3,"sources":["/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/src/Mycourses.js"],"names":["React","Link","Mycourses","props","check","setState","shscourses","state","searched_courses","length","message","search","mycourses","data","FormData","append","name","fetch","method","headers","Authorization","localStorage","getItem","body","then","res","json","console","log","catch","err","handleinput","e","target","value","unenroll","id","window","confirm","courselist","i","p","splice","loading","methods","paddingTop","map","t","course_img","course_id","marginTop","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Link} from 'react-router-dom';\nimport \"./Mycourses.css\";\nimport \"./Displays.css\";\n\n//This class component is for students to view their enrolled courses\n\nclass Mycourses extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state={\n            mycourses:[],\n            searched_courses:[],\n            message:false,\n            name:\"\",\n            loading:true\n\n        }\n    }\n\n   \n\n\n\n\n/*Function to throw message if search result is empty and\nto set mycourses state to an empty array if the search \nresult is empty.This will throw an empty page with message\n*/\ncheck=()=>{\n    this.setState({\n        shscourses:[]\n    })\n/*If we return empty courses, send the message \nby changing the state\n*/\n    if(this.state.searched_courses.length===0){\n      this.setState({\n          message:true\n      })\n    }\n}\n\n\n\n\n\n//Function to search for courses.........................\nsearch=()=>{\n     //Please look at this function at the top it's  very important\n    this.check();\n     \n    this.setState({\n        mycourses:[]\n    })\n    const data=new FormData();\n    data.append(\"name\",this.state.name)\n    fetch(\"https://merl.herokuapp.com/search_my_enrolled_courses\",\n\n    {\n        method:\"POST\",\n        headers:{\n            Authorization:`${localStorage.getItem(\"student_token\")}`\n        },\n        \"Content-Type\":\"application/json\",\n        \n        body:data\n    }\n    )\n    .then(res=>res.json())\n    .then(data=>{\n        this.setState({\n            searched_courses:data,\n            \n        })\n        //I did this because of testing in the console\n        console.log(data)\n        \n    })\n    .catch(err=>console.log(err))\n    \n\n    \n    \n}\n\nhandleinput=(e)=>{\n   \nthis.setState({\n    [e.target.name]:e.target.value\n})\n\n\n\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n   unenroll=(id)=>{\n\n\n          if (window.confirm(\"Are you sure you want to unenroll in this course\")){\n\n          \n\n\n       fetch(`https://merl.herokuapp.com/un_enroll/${id}`,\n       {\n           method:\"DELETE\",\n\n           headers:{\n               Authorization:`${localStorage.getItem('student_token')}`\n           }\n\n\n\n       }\n       )\n       .then(res=>res.json())\n       .then(data=>{\n           //alert(data)\n           let courselist=this.state.mycourses\n           for(let i=0;i<courselist.length;i++){\n               let p=courselist[i]\n               if(p.id===id){\n                   courselist.splice(i,1)\n                   break\n               }\n           }\n           this.setState({mycourses:courselist})\n\n\n       })\n       .catch(err=>console.log(err))\n    }\n   }\n\n\n\n\n\n   componentDidMount(){\n    fetch(\"https://merl.herokuapp.com/my_enrolled_courses\",\n    {\n        methods:\"GET\",\n        \"Content-Type\":\"application/json\",\n\n        headers:{\n            Authorization:`${localStorage.getItem(\"student_token\")}`\n        }\n    }\n    )\n    .then(res=>res.json())\n    .then(data=>{\n        this.setState({\n            mycourses:data,\n            loading:false\n        })\n\n    })\n}\n\n\n\n\n\n\n\n\n    render(){\n        return(\n            \n      <div style={{paddingTop:150}} className=\"row\">\n\n                   {/**********Search nav with search */}\n        <div className=\"search-nav\">\n <input type=\"text\"\n  value ={this.state.name}\n  name=\"name\"\n  onChange={this.handleinput}\n  onKeyUp={this.search}\n   placeholder=\"Search courses......\" \n   className=\"search-input\"/>\n   <button className=\"search-button\" onClick={this.search}>Search</button>\n </div>\n                {/**********End of search-bar */}\n\n\n\n\n\n               \n               {this.state.searched_courses.length>0?\n               \n                  \n\n                   \n                    this.state.searched_courses.map(t=>\n                \n                        <div className=\"course-container  col-md-6 col-xl-4 col-sm-12 col-xs-12 col-lg-3\">\n                        <div className=\"course-header\"><img className=\"course-img\" src={`https://merl.herokuapp.com${t.course_img}`}/></div>\n                        <div className=\"course-footer  col text-center\"><h3 className=\"course-name\">{t.name}</h3>\n                        <div className=\"\">\n                       <Link to={`singlecourse/${t.course_id}`}><button className=\"acess-butn\">Acess</button></Link>\n                       <button onClick={()=>{this.unenroll(t.course_id)}} className=\"enroll-butn\">Unenroll</button>\n                       </div>\n                        </div>\n                       </div>\n                       \n                        )\n                :null}\n              \n\n\n\n{              this.state.loading==false?\n               this.state.mycourses.map(t=>\n                    <div className=\"course-container  col-md-6 col-xl-4 col-sm-12 col-xs-12 col-lg-3\">\n                <div className=\"course-header\"><img className=\"course-img\" src={`http://127.0.0.1:5000${t.course_img}`}/></div>\n                <div className=\"course-footer  col text-center\"><h3 className=\"course-name\">{t.name}</h3>\n                <Link to={`singlecourse/${t.course_id}`}><button className=\"acess-butn\">Acess</button></Link>\n                       <button onClick={()=>{this.unenroll(t.course_id)}} className=\"enroll-butn\">Unenroll</button>\n                </div>\n            </div>\n                   \n                   )\n           :<div style={{marginTop:200}} className=\"col text-center\"><h1>{this.state.message}</h1></div>}\n        </div>\n        \n        )\n}\n}\n\nexport default Mycourses;"]},"metadata":{},"sourceType":"module"}