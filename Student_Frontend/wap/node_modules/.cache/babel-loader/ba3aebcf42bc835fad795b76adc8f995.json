{"ast":null,"code":"import _defineProperty from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Topnav.css';import{Link}from'react-router-dom';//I'm using this for email validation\nvar validEmailRegex=RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);//function to validate the form\nvar validateForm=function validateForm(errors){var valid=true;Object.values(errors).forEach(//If we have an error string entered by the user,set valid to false\nfunction(val){return val.length>0&&(valid=false);});return valid;};var StudentLogin=/*#__PURE__*/function(_React$Component){_inherits(StudentLogin,_React$Component);var _super=_createSuper(StudentLogin);function StudentLogin(props){var _this;_classCallCheck(this,StudentLogin);_this=_super.call(this,props);_this.handleinput=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));var name=e.target.name;var value=e.target.value;var errors=_this.state.errors;/*I'm using switch \n        statement here because\n         I want to avoid multiple\n        if else statements*/switch(name){//Using the switch statement to reduce multiple if else statements\n//Here,I'm testing email pattern\ncase'email':errors.email=validEmailRegex.test(value)?'':'Email is not valid!';break;case'password':errors.password=value.length<8?'Password must be at least 8 characters long!':'';break;default:break;}_this.setState(_defineProperty({errors:errors},name,value),function(){//So that I can see the result in the conssole\nconsole.log(errors);});};_this.login=function(e){e.preventDefault();if(validateForm(_this.state.errors)){console.log(\"Form is  valid\");_this.setState({loading:true});fetch(\"https://merl.herokuapp.com/student_login\",{method:\"POST\",body:JSON.stringify(_this.state),headers:{'Content-type':'application/json'}}).then(function(res){return res.json();}).then(function(data){_this.setState({loading:false});if(data.error==null){alert(\"Logged in sucessfully\");localStorage.setItem(\"student_token\",data);_this.props.history.push(\"StudentProfile\");}else{_this.setState({error:data.error});}}).catch(function(err){alert(err);});}else{_this.setState({k:\"Invalid Form\"});}};_this.state={email:\"\",password:\"\",error:\"\",//error from the server will be loaded here\nmessage:\"\",//message from the server will be loaded here\nk:\"\",//This will throw an error message if the user submits an empty form\nerrors:{//Error from client due to user inputs\nname:\"\",email:\"\",password:\"\"},loading:false};return _this;}_createClass(StudentLogin,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-container\",onSubmit:this.login},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.signup,className:\"form-group\"},/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"red\",fontSize:15}},this.state.k),/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"grey\",fontSize:20}},\"Log in for Wap\"),/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"red\",fontSize:20}},this.state.error),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:this.handleinput,className:\" forminput\",placeholder:\"Email\",name:\"email\",required:\"true\",value:this.state.email}),this.state.errors.email.length>0&&/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"red\",fontSize:15}},this.state.errors.email),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:this.handleinput,className:\" forminput\",placeholder:\"Password\",name:\"password\",required:\"true\",value:this.state.password}),this.state.loading==false?/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"formbutton\",value:\" Log in\"}):/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"formbutton\",value:\"Sending....\"}),/*#__PURE__*/React.createElement(\"h3\",{style:{fontSize:15}},\"Don't have an account?\",/*#__PURE__*/React.createElement(Link,{to:\"/studentsignup\"},/*#__PURE__*/React.createElement(\"a\",{style:{fontSize:15,color:\"rgb(184, 23, 103)\"}},\"Signup\"))),/*#__PURE__*/React.createElement(\"h3\",null,/*#__PURE__*/React.createElement(Link,{to:\"/forgotpassword\"},/*#__PURE__*/React.createElement(\"a\",{style:{fontSize:15,marginTop:17,color:\"rgb(184, 23, 103)\",textDecoration:\"none\"}},\"Forgot Password?\")))))));}}]);return StudentLogin;}(React.Component);export default StudentLogin;","map":{"version":3,"sources":["/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/src/StudentLogin.js"],"names":["React","Link","validEmailRegex","RegExp","validateForm","errors","valid","Object","values","forEach","val","length","StudentLogin","props","handleinput","e","setState","target","name","value","state","email","test","password","console","log","login","preventDefault","loading","fetch","method","body","JSON","stringify","headers","then","res","json","data","error","alert","localStorage","setItem","history","push","catch","err","k","message","signup","color","fontSize","marginTop","textDecoration","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Topnav.css';\nimport {Link} from 'react-router-dom';\n\n\n\n//I'm using this for email validation\nconst validEmailRegex= \nRegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n\n\n//function to validate the form\nconst validateForm=(errors)=>{\n    let valid=true;\n    Object.values(errors).forEach(\n        //If we have an error string entered by the user,set valid to false\n        (val)=>val.length>0&&(valid=false)\n    );\n    return valid;\n}\n\n\n\n\n\n\n\n\n\n\nclass StudentLogin extends React.Component{\n\n\n\n\n    constructor(props){\n        super(props);\n        this.state={\n            email:\"\",\n            password:\"\",\n            error:\"\",//error from the server will be loaded here\n            message:\"\",//message from the server will be loaded here\n            k:\"\",//This will throw an error message if the user submits an empty form\n            errors:{//Error from client due to user inputs\n             name:\"\",\n             email:\"\",\n             password:\"\",\n             \n            },\n            loading:false\n            \n        }\n    }\n\n    handleinput=(e)=>{\n       this.setState({\n           [e.target.name]:e.target.value\n       })\n\n        let name=e.target.name;\n        let value=e.target.value;\n        let errors =this.state.errors;\n        /*I'm using switch \n        statement here because\n         I want to avoid multiple\n        if else statements*/\n\n        switch(name){\n                 //Using the switch statement to reduce multiple if else statements\n                //Here,I'm testing email pattern\n            case 'email': \n                errors.email = \n                  validEmailRegex.test(value)\n                    ? ''\n                    : 'Email is not valid!';\n                break; \n                \n            case 'password': \n             errors.password = \n              value.length < 8\n               ? 'Password must be at least 8 characters long!'\n               : '';\n            break;\n         default:\n         break;\n        }\n\n        this.setState({errors, [name]: value}, ()=> {\n            //So that I can see the result in the conssole\n            console.log(errors)\n        })\n    }\n\n    login=(e)=>{\n        e.preventDefault();\n    \n        if(validateForm(this.state.errors)){\n            console.log(\"Form is  valid\")\n            \n            \n          this.setState({\n              loading:true\n          })\n     \n        fetch(\"https://merl.herokuapp.com/student_login\",{\n            method:\"POST\",\n            body:JSON.stringify(this.state),\n            headers:{\n                'Content-type':'application/json'\n            }\n        })\n        .then(res=>res.json())\n        .then(data=>{\n            this.setState({\n                loading:false\n            })\n            if (data.error==null){\n                alert(\"Logged in sucessfully\");\n                localStorage.setItem(\"student_token\",data)\n                this.props.history.push(\"StudentProfile\");\n            }\n            else{\n                this.setState({error:data.error})\n            }\n        }).catch((err)=>{alert(err)});\n        \n        \n        }\n            \n               \n        else{\n            this.setState({\n                k:\"Invalid Form\"\n            })\n        }   \n    \n\n\n\n \n\n\n\n    }\n\n\n\n\n\n\n\n    render(){\n        return(\n            \n            <div className=\"row\">\n            <div className=\"bg\">\n                  <div className=\"form-container\" onSubmit={this.login}>\n                      <form onSubmit={this.signup} className=\"form-group\">\n                      <h3 style={{color:\"red\",fontSize:15}}>{this.state.k}</h3>\n                          <h3 style={{color:\"grey\",fontSize:20}}>Log in for Wap</h3>\n                      <h3 style={{color:\"red\",fontSize:20}}>{this.state.error}</h3>\n                    \n                       <input type=\"text\" onChange={this.handleinput}\n                          className=\" forminput\"\n                          placeholder=\"Email\"\n                          name=\"email\"\n                          required=\"true\"\n                          \n                          value={this.state.email}\n                          />\n                        {this.state.errors.email.length>0&&\n                          <h3 style={{color:\"red\",fontSize:15}}>{this.state.errors.email}</h3>\n        \n                            }\n                       <input type=\"password\" onChange={this.handleinput}\n                          className=\" forminput\"\n                          placeholder=\"Password\"\n                          name=\"password\"\n                          required=\"true\"\n                          value={this.state.password}\n                          />\n                        \n\n                        {this.state.loading==false?<input type=\"submit\" className=\"formbutton\" value=\" Log in\"/>:<input type=\"submit\" className=\"formbutton\" value=\"Sending....\"/>}\n                          <h3 style={{fontSize:15}}>\n                              Don't have an account?\n                          <Link to=\"/studentsignup\">\n                            <a  style={{fontSize:15,color:\"rgb(184, 23, 103)\"}}>\n                              Signup\n                              </a> \n                              </Link>\n                              </h3>\n                              <h3 >\n                                  <Link to=\"/forgotpassword\">\n                                    <a style={{fontSize:15,marginTop:17,color:\"rgb(184, 23, 103)\",textDecoration:\"none\"}}>\n                                        Forgot Password?\n                                        </a>\n                                  </Link>\n                              </h3>\n                      </form>\n            </div>\n         </div>\n         </div>\n         \n         \n         \n        )\n    }\n}\n\nexport default StudentLogin;"]},"metadata":{},"sourceType":"module"}