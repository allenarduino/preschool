{"ast":null,"code":"var _jsxFileName = \"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/src/ForgotPassword.js\";\nimport React from 'react';\nimport './Topnav.css';\nimport { Link } from 'react-router-dom'; //I'm using this for email validation\n\nconst validEmailRegex = RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i); //function to validate the form\n\nconst validateForm = errors => {\n  let valid = true;\n  Object.values(errors).forEach( //If we have an error string entered by the user,set valid to false\n  val => val.length > 0 && (valid = false));\n  return valid;\n};\n\nclass ForgotPassword extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleinput = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n      let name = e.target.name;\n      let value = e.target.value;\n      let errors = this.state.errors;\n      /*I'm using switch \n      statement here because\n       I want to avoid multiple\n      if else statements*/\n\n      switch (name) {\n        //Using the switch statement to reduce multiple if else statements\n        //Here,I'm testing email pattern\n        case 'email':\n          errors.email = validEmailRegex.test(value) ? '' : 'Email is not valid!';\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        errors,\n        [name]: value\n      }, () => {\n        //So that I can see the result in the conssole\n        console.log(errors);\n      });\n    };\n\n    this.login = e => {\n      e.preventDefault();\n\n      if (validateForm(this.state.errors)) {\n        console.log(\"Form is  valid\");\n        fetch(\" http://127.0.0.1:5000/reset_password\", {\n          method: \"POST\",\n          body: JSON.stringify(this.state),\n          headers: {\n            'Content-type': 'application/json'\n          }\n        }).then(res => res.json()).then(data => {\n          this.setState({\n            loading: false\n          });\n\n          if (data.error == null) {\n            alert(\"Logged in sucessfully\");\n            localStorage.setItem(\"student_token\", data);\n            this.props.history.push(\"StudentProfile\");\n          } else {\n            this.setState({\n              error: data.error\n            });\n          }\n        }).catch(err => {\n          alert(err);\n        });\n      } else {\n        this.setState({\n          k: \"Invalid Form\"\n        });\n      }\n    };\n\n    this.state = {\n      email: \"\",\n      error: \"\",\n      //error from the server will be loaded here\n      message: \"\",\n      //message from the server will be loaded here\n      k: \"\",\n      //This will throw an error message if the user submits an empty form\n      errors: {\n        //Error from client due to user inputs\n        email: \"\"\n      },\n      loading: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-container\",\n      onSubmit: this.login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.signup,\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        color: \"red\",\n        fontSize: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 23\n      }\n    }, this.state.k), /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        color: \"grey\",\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 27\n      }\n    }, \"Enter your email\"), /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        color: \"red\",\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 23\n      }\n    }, this.state.error), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.handleinput,\n      className: \" forminput\",\n      placeholder: \"Email\",\n      name: \"email\",\n      required: \"true\",\n      value: this.state.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 24\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        color: \"red\",\n        fontSize: 15\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 20\n      }\n    }, this.state.errors.email), this.state.loading == false ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"formbutton\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 52\n      }\n    }) : /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"formbutton\",\n      value: \"Sending....\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 113\n      }\n    })))));\n  }\n\n}\n\nexport default ForgotPassword;","map":{"version":3,"sources":["/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/src/ForgotPassword.js"],"names":["React","Link","validEmailRegex","RegExp","validateForm","errors","valid","Object","values","forEach","val","length","ForgotPassword","Component","constructor","props","handleinput","e","setState","target","name","value","state","email","test","console","log","login","preventDefault","fetch","method","body","JSON","stringify","headers","then","res","json","data","loading","error","alert","localStorage","setItem","history","push","catch","err","k","message","render","signup","color","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Topnav.css';\nimport {Link} from 'react-router-dom';\n\n\n\n//I'm using this for email validation\nconst validEmailRegex= \nRegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n\n\n//function to validate the form\nconst validateForm=(errors)=>{\n    let valid=true;\n    Object.values(errors).forEach(\n        //If we have an error string entered by the user,set valid to false\n        (val)=>val.length>0&&(valid=false)\n    );\n    return valid;\n}\n\n\n\n\n\n\n\n\n\n\nclass ForgotPassword extends React.Component{\n\n\n\n\n    constructor(props){\n        super(props);\n        this.state={\n            email:\"\",\n            error:\"\",//error from the server will be loaded here\n            message:\"\",//message from the server will be loaded here\n            k:\"\",//This will throw an error message if the user submits an empty form\n            errors:{//Error from client due to user inputs\n             email:\"\",\n             \n            },\n            loading:false\n            \n        }\n    }\n\n    handleinput=(e)=>{\n        this.setState({\n          [e.target.name]:e.target.value\n        });\n\n        let name=e.target.name;\n        let value=e.target.value;\n        let errors =this.state.errors;\n        /*I'm using switch \n        statement here because\n         I want to avoid multiple\n        if else statements*/\n\n        switch(name){\n                 //Using the switch statement to reduce multiple if else statements\n                //Here,I'm testing email pattern\n            case 'email': \n                errors.email = \n                  validEmailRegex.test(value)\n                    ? ''\n                    : 'Email is not valid!';\n                break; \n                \n           \n         default:\n         break;\n        }\n\n        this.setState({errors, [name]: value}, ()=> {\n            //So that I can see the result in the conssole\n            console.log(errors)\n        })\n    }\n\n    login=(e)=>{\n        e.preventDefault();\n    \n        if(validateForm(this.state.errors)){\n            console.log(\"Form is  valid\")\n            \n            \n\n     \n        fetch(\" http://127.0.0.1:5000/reset_password\",{\n            method:\"POST\",\n            body:JSON.stringify(this.state),\n            headers:{\n                'Content-type':'application/json'\n            }\n        })\n        .then(res=>res.json())\n        .then(data=>{\n            this.setState({\n                loading:false\n            })\n            if (data.error==null){\n                alert(\"Logged in sucessfully\");\n                localStorage.setItem(\"student_token\",data)\n                this.props.history.push(\"StudentProfile\");\n            }\n            else{\n                this.setState({error:data.error})\n            }\n        }).catch((err)=>{alert(err)});\n        \n        \n        }\n            \n               \n        else{\n            this.setState({\n                k:\"Invalid Form\"\n            })\n        }   \n    \n\n\n\n \n\n\n\n    }\n\n\n\n\n\n\n\n    render(){\n        return(\n            \n            <div className=\"row\">\n            <div className=\"bg\">\n                  <div className=\"form-container\" onSubmit={this.login}>\n                      <form onSubmit={this.signup} className=\"form-group\">\n                      <h3 style={{color:\"red\",fontSize:15}}>{this.state.k}</h3>\n                          <h3 style={{color:\"grey\",fontSize:20}}>Enter your email</h3>\n                      <h3 style={{color:\"red\",fontSize:20}}>{this.state.error}</h3>\n                    \n                       <input type=\"text\" onChange={this.handleinput}\n                          className=\" forminput\"\n                          placeholder=\"Email\"\n                          name=\"email\"\n                          required=\"true\"\n                          \n                          value={this.state.email}\n                          />\n\n\n                   <h3 style={{color:\"red\",fontSize:15}}>{this.state.errors.email}</h3>\n\n                     \n                        \n\n                        {this.state.loading==false?<input type=\"submit\" className=\"formbutton\" value=\"Submit\"/>:<input type=\"submit\" className=\"formbutton\" value=\"Sending....\"/>}\n                         \n                      </form>\n            </div>\n         </div>\n         </div>\n         \n         \n         \n        )\n    }\n}\n\nexport default ForgotPassword;"]},"metadata":{},"sourceType":"module"}