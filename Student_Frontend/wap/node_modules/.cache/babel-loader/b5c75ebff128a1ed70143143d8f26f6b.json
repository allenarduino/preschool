{"ast":null,"code":"import _defineProperty from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Topnav.css';import{Link}from'react-router-dom';//I'm using this for email validation\nvar validEmailRegex=RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);//function to validate the form\nvar validateForm=function validateForm(errors){var valid=true;Object.values(errors).forEach(//If we have an error string entered by the user,set valid to false\nfunction(val){return val.length>0&&(valid=false);});return valid;};var ForgotPassword=/*#__PURE__*/function(_React$Component){_inherits(ForgotPassword,_React$Component);var _super=_createSuper(ForgotPassword);function ForgotPassword(props){var _this;_classCallCheck(this,ForgotPassword);_this=_super.call(this,props);_this.handleinput=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));var name=e.target.name;var value=e.target.value;var errors=_this.state.errors;/*I'm using switch \n        statement here because\n         I want to avoid multiple\n        if else statements*/switch(name){//Using the switch statement to reduce multiple if else statements\n//Here,I'm testing email pattern\ncase'email':errors.email=validEmailRegex.test(value)?'':'Email is not valid!';break;default:break;}_this.setState(_defineProperty({errors:errors},name,value),function(){//So that I can see the result in the conssole\nconsole.log(errors);});};_this.submit=function(e){e.preventDefault();_this.setState({loading:true});if(validateForm(_this.state.errors)){console.log(\"Form is  valid\");var data=new FormData();fetch(\" http://127.0.0.1:5000/password_reset\",{method:\"POST\",body:JSON.stringify(_this.state),headers:{'Content-type':'application/json'}}).then(function(res){return res.json();}).then(function(data){_this.setState({loading:false});if(data.error==null){_this.props.history.push(\"StudentProfile\");}else{_this.setState({error:data.error});}}).catch(function(err){alert(err);});}else{_this.setState({k:\"Invalid Form\"});}};_this.state={email:\"\",error:\"\",//error from the server will be loaded here\nmessage:\"\",//message from the server will be loaded here\nk:\"\",//This will throw an error message if the user submits an empty form\nerrors:{//Error from client due to user inputs\nemail:\"\"},loading:false};return _this;}_createClass(ForgotPassword,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"bg\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-container\",onSubmit:this.login},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.submit,className:\"form-group\"},/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"red\",fontSize:15}},this.state.k),/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"grey\",fontSize:20}},\"Enter your email\"),/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"red\",fontSize:20}},this.state.error),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:this.handleinput,className:\" forminput\",placeholder:\"Email\",name:\"email\",required:\"true\",value:this.state.email}),/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"red\",fontSize:15}},this.state.errors.email),this.state.loading==false?/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"formbutton\",value:\"Submit\"}):/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",className:\"formbutton\",value:\"Sending....\"})))));}}]);return ForgotPassword;}(React.Component);export default ForgotPassword;","map":{"version":3,"sources":["/media/allen/SIMBAD/Flaskprojects/Preschool/design/preschool/Student_Frontend/wap/src/ForgotPassword.js"],"names":["React","Link","validEmailRegex","RegExp","validateForm","errors","valid","Object","values","forEach","val","length","ForgotPassword","props","handleinput","e","setState","target","name","value","state","email","test","console","log","submit","preventDefault","loading","data","FormData","fetch","method","body","JSON","stringify","headers","then","res","json","error","history","push","catch","err","alert","k","message","login","color","fontSize","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Topnav.css';\nimport {Link} from 'react-router-dom';\n\n\n\n//I'm using this for email validation\nconst validEmailRegex= \nRegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n\n\n//function to validate the form\nconst validateForm=(errors)=>{\n    let valid=true;\n    Object.values(errors).forEach(\n        //If we have an error string entered by the user,set valid to false\n        (val)=>val.length>0&&(valid=false)\n    );\n    return valid;\n}\n\n\n\n\n\n\n\n\n\n\nclass ForgotPassword extends React.Component{\n\n\n\n\n    constructor(props){\n        super(props);\n        this.state={\n            email:\"\",\n            error:\"\",//error from the server will be loaded here\n            message:\"\",//message from the server will be loaded here\n            k:\"\",//This will throw an error message if the user submits an empty form\n            errors:{//Error from client due to user inputs\n             email:\"\",\n             \n            },\n            loading:false\n            \n        }\n    }\n\n    handleinput=(e)=>{\n        this.setState({\n          [e.target.name]:e.target.value\n        });\n\n        let name=e.target.name;\n        let value=e.target.value;\n        let errors =this.state.errors;\n        /*I'm using switch \n        statement here because\n         I want to avoid multiple\n        if else statements*/\n\n        switch(name){\n                 //Using the switch statement to reduce multiple if else statements\n                //Here,I'm testing email pattern\n            case 'email': \n                errors.email = \n                  validEmailRegex.test(value)\n                    ? ''\n                    : 'Email is not valid!';\n                break; \n                \n           \n         default:\n         break;\n        }\n\n        this.setState({errors, [name]: value}, ()=> {\n            //So that I can see the result in the conssole\n            console.log(errors)\n        })\n    }\n\n    submit=(e)=>{\n        e.preventDefault();\n        this.setState({\n            loading:true\n        })\n    \n        if(validateForm(this.state.errors)){\n            console.log(\"Form is  valid\")\n            \n            \n         const data=new FormData()\n    \n     \n        fetch(\" http://127.0.0.1:5000/password_reset\",{\n            method:\"POST\",\n            body:JSON.stringify(this.state),\n            headers:{\n                'Content-type':'application/json'\n            }\n        })\n        .then(res=>res.json())\n        .then(data=>{\n            this.setState({\n                loading:false\n            })\n            if (data.error==null){\n                \n                this.props.history.push(\"StudentProfile\");\n            }\n            else{\n                this.setState({error:data.error})\n            }\n        }).catch((err)=>{alert(err)});\n        \n        \n        }\n            \n               \n        else{\n            this.setState({\n                k:\"Invalid Form\"\n            })\n        }   \n    \n\n\n\n \n\n\n\n    }\n\n\n\n\n\n\n\n    render(){\n        return(\n            \n            <div className=\"row\">\n            <div className=\"bg\">\n                  <div className=\"form-container\" onSubmit={this.login}>\n                      <form onSubmit={this.submit} className=\"form-group\">\n                      <h3 style={{color:\"red\",fontSize:15}}>{this.state.k}</h3>\n                          <h3 style={{color:\"grey\",fontSize:20}}>Enter your email</h3>\n                      <h3 style={{color:\"red\",fontSize:20}}>{this.state.error}</h3>\n                    \n                       <input type=\"text\" onChange={this.handleinput}\n                          className=\" forminput\"\n                          placeholder=\"Email\"\n                          name=\"email\"\n                          required=\"true\"\n                          \n                          value={this.state.email}\n                          />\n\n\n                   <h3 style={{color:\"red\",fontSize:15}}>{this.state.errors.email}</h3>\n\n                     \n                        \n\n                        {this.state.loading==false?<input type=\"submit\" className=\"formbutton\" value=\"Submit\"/>:<input type=\"submit\" className=\"formbutton\" value=\"Sending....\"/>}\n                         \n                      </form>\n            </div>\n         </div>\n         </div>\n         \n         \n         \n        )\n    }\n}\n\nexport default ForgotPassword;"]},"metadata":{},"sourceType":"module"}